<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasuri Hunt - –ü–æ–ª—é–≤–∞–Ω–Ω—è –Ω–∞ –°–∫–∞—Ä–±–∏</title>
    <style>
        :root {
            --primary: #ffd700;
            --bg: #1a1a2e;
            --panel: #16213e;
            --accent: #e94560;
            --text: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        header {
            background-color: var(--panel);
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid var(--primary);
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        h1 { margin: 0; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; }
        .stats { margin-top: 10px; font-size: 1.2em; }
        .coin-icon { color: var(--primary); }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            background: #0f3460;
            padding: 10px;
        }

        nav button {
            background: none;
            border: none;
            color: white;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1.1em;
            transition: 0.3s;
        }

        nav button:hover, nav button.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .section { display: none; animation: fadeIn 0.5s; }
        .section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Containers (Cards) */
        .container-card {
            background: var(--panel);
            border: 1px solid #333;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .container-card.locked { opacity: 0.8; border-left: 5px solid var(--accent); }
        .container-card.unlocked { border-left: 5px solid #4caf50; }

        input[type="text"] {
            padding: 10px;
            border-radius: 5px;
            border: none;
            width: 70%;
            margin-top: 10px;
        }

        button.action-btn {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }

        button.action-btn:hover { transform: scale(1.05); }
        button.action-btn:disabled { background: #555; cursor: not-allowed; }

        /* Shop Grid */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .shop-item {
            background: var(--panel);
            padding: 15px;
            text-align: center;
            border-radius: 10px;
            border: 1px solid var(--primary);
        }

        /* Leaderboard */
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--panel);
        }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #333; }
        th { color: var(--primary); }
        tr:nth-child(even) { background-color: #1a1a2e; }

        /* Notification */
        #notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 15px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>

<header>
    <h1>Treasuri Hunt</h1>
    <div class="stats">
        –ì–∞–º–∞–Ω–µ—Ü—å: <span id="coin-display">0</span> <span class="coin-icon">‚óè</span>
        | –¢–∏—Ç—É–ª: <span id="title-display">–ù–æ–≤–∞—á–æ–∫</span>
    </div>
</header>

<nav>
    <button onclick="showSection('game')" class="active">–ü–æ–ª—é–≤–∞–Ω–Ω—è</button>
    <button onclick="showSection('shop')">–ú–∞–≥–∞–∑–∏–Ω</button>
    <button onclick="showSection('leaderboard')">–õ—ñ–¥–µ—Ä–±–æ—Ä–¥</button>
    <button onclick="showSection('social')">–î—Ä—É–∑—ñ</button>
</nav>

<main>
    <div id="game" class="section active">
        <h2>üìÇ –°—Ö–æ–≤–∞–Ω—ñ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏</h2>
        <p>–†–æ–∑–≥–∞–¥–∞–π –∫–æ–¥–∏, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –º–æ–Ω–µ—Ç–∏.</p>
        
        <div class="container-card locked" id="cont-1">
            <h3>üìú container1.txt (–°—Ç–∞—Ä—Ç–æ–≤–∏–π)</h3>
            <p>–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å "START", —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä—à—ñ –º–æ–Ω–µ—Ç–∏.</p>
            <input type="text" id="input-1" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥...">
            <button class="action-btn" onclick="unlock(1, 'START', 50)">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
        </div>

        <div class="container-card locked" id="cont-2">
            <h3>üß© puzzle_box.py (–ó–∞–≥–∞–¥–∫–∞)</h3>
            <p>"–Ø –∑–∞–≤–∂–¥–∏ –π–¥—É –≤–≥–æ—Ä—É, –∞–ª–µ –Ω—ñ–∫–æ–ª–∏ –Ω–µ —Å–ø—É—Å–∫–∞—é—Å—è. –©–æ —è?"</p>
            <input type="text" id="input-2" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å...">
            <button class="action-btn" onclick="unlock(2, '–≤—ñ–∫', 100)">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
        </div>

        <div class="container-card locked" id="cont-3">
            <h3>üßÆ math_problem.md</h3>
            <p>–°–∫—ñ–ª—å–∫–∏ –±—É–¥–µ 5 * 5 + 25 - 10?</p>
            <input type="text" id="input-3" placeholder="–ß–∏—Å–ª–æ...">
            <button class="action-btn" onclick="unlock(3, '40', 150)">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>

    <div id="shop" class="section">
        <h2>üõí –ú–∞–≥–∞–∑–∏–Ω –ü–æ–¥–∞—Ä—É–Ω–∫—ñ–≤</h2>
        <div class="shop-grid">
            <div class="shop-item">
                <h3>üëë –¢–∏—Ç—É–ª "–ö–æ—Ä–æ–ª—å"</h3>
                <p>–¶—ñ–Ω–∞: 200 –º–æ–Ω–µ—Ç</p>
                <button class="action-btn" onclick="buyItem('title', '–ö–æ—Ä–æ–ª—å –°–∫–∞—Ä–±—ñ–≤', 200)">–ö—É–ø–∏—Ç–∏</button>
            </div>
            <div class="shop-item">
                <h3>üõ°Ô∏è –°—Ä—ñ–±–Ω–∏–π –°–∫—ñ–Ω</h3>
                <p>–ó–º—ñ–Ω—é—î —Ç–µ–º—É.</p>
                <p>–¶—ñ–Ω–∞: 150 –º–æ–Ω–µ—Ç</p>
                <button class="action-btn" onclick="buyItem('skin', 'silver', 150)">–ö—É–ø–∏—Ç–∏</button>
            </div>
            <div class="shop-item">
                <h3>üéÅ –†–æ–∑—ñ–≥—Ä–∞—à (Giveaway)</h3>
                <p>–®–∞–Ω—Å –≤–∏–≥—Ä–∞—Ç–∏ 500 –º–æ–Ω–µ—Ç!</p>
                <p>–¶—ñ–Ω–∞ –∫–≤–∏—Ç–∫–∞: 50 –º–æ–Ω–µ—Ç</p>
                <button class="action-btn" onclick="playLottery()">–ì—Ä–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <div id="leaderboard" class="section">
        <h2>üèÜ –¢–æ–ø –ì—Ä–∞–≤—Ü—ñ–≤</h2>
        <table>
            <thead>
                <tr><th>–ú—ñ—Å—Ü–µ</th><th>–ì—Ä–∞–≤–µ—Ü—å</th><th>–ú–æ–Ω–µ—Ç–∏</th><th>–¢–∏—Ç—É–ª</th></tr>
            </thead>
            <tbody id="leaderboard-body">
                </tbody>
        </table>
    </div>

    <div id="social" class="section">
        <h2>ü§ù –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è –º–æ–Ω–µ—Ç–∞–º–∏</h2>
        <div class="container-card">
            <p>–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –º–æ–Ω–µ—Ç–∏ –¥—Ä—É–≥—É:</p>
            <input type="text" placeholder="–Ü–º'—è –¥—Ä—É–≥–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Alex)" id="friend-name">
            <input type="number" placeholder="–°—É–º–∞" id="send-amount" style="width: 100px; padding: 10px;">
            <button class="action-btn" onclick="sendCoins()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        </div>
    </div>
</main>

<div id="notification">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</div>

<script>
    // --- STATE MANAGEMENT ---
    let player = {
        coins: 0,
        title: "–ù–æ–≤–∞—á–æ–∫",
        unlocked: [], // IDs of unlocked containers
        skin: "default"
    };

    // Load from LocalStorage
    if(localStorage.getItem('treasuriPlayer')) {
        player = JSON.parse(localStorage.getItem('treasuriPlayer'));
        applySkin(player.skin);
    }

    // --- CORE FUNCTIONS ---
    function updateUI() {
        document.getElementById('coin-display').innerText = player.coins;
        document.getElementById('title-display').innerText = player.title;
        
        // Disable opened containers
        player.unlocked.forEach(id => {
            const card = document.getElementById(`cont-${id}`);
            if(card) {
                card.classList.remove('locked');
                card.classList.add('unlocked');
                card.innerHTML = `<h3>‚úÖ –í—ñ–¥–∫—Ä–∏—Ç–æ!</h3><p>–í–∏ –≤–∂–µ –∑–∞–±—Ä–∞–ª–∏ —Å–∫–∞—Ä–± –∑ —Ü—å–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.</p>`;
            }
        });
        
        saveData();
    }

    function saveData() {
        localStorage.setItem('treasuriPlayer', JSON.stringify(player));
        generateLeaderboard(); // Update player position
    }

    function notify(msg) {
        const n = document.getElementById('notification');
        n.innerText = msg;
        n.style.display = 'block';
        setTimeout(() => { n.style.display = 'none'; }, 3000);
    }

    function showSection(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
    }

    // --- GAME LOGIC ---
    function unlock(id, code, reward) {
        if (player.unlocked.includes(id)) return;

        const input = document.getElementById(`input-${id}`).value.trim().toLowerCase();
        if (input === code.toLowerCase()) {
            player.coins += reward;
            player.unlocked.push(id);
            notify(`üéâ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç—Ä–∏–º–∞–Ω–æ ${reward} –º–æ–Ω–µ—Ç!`);
            updateUI();
        } else {
            notify("‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –∫–æ–¥. –°–ø—Ä–æ–±—É–π —â–µ!");
        }
    }

    // --- SHOP LOGIC ---
    function buyItem(type, value, price) {
        if (player.coins >= price) {
            player.coins -= price;
            if (type === 'title') player.title = value;
            if (type === 'skin') {
                player.skin = value;
                applySkin(value);
            }
            notify(`üõí –ü—Ä–∏–¥–±–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ!`);
            updateUI();
        } else {
            notify("‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º–æ–Ω–µ—Ç!");
        }
    }

    function playLottery() {
        if (player.coins < 50) { notify("‚ö†Ô∏è –¢—Ä–µ–±–∞ 50 –º–æ–Ω–µ—Ç!"); return; }
        player.coins -= 50;
        
        // 30% chance to win
        if (Math.random() < 0.3) {
            player.coins += 500;
            notify("üé∞ –î–ñ–ï–ö–ü–û–¢! –í–∏ –≤–∏–≥—Ä–∞–ª–∏ 500 –º–æ–Ω–µ—Ç!");
        } else {
            notify("üò¢ –ù–µ –ø–æ—â–∞—Å—Ç–∏–ª–æ. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ.");
        }
        updateUI();
    }

    function applySkin(skin) {
        const root = document.documentElement;
        if (skin === 'silver') {
            root.style.setProperty('--primary', '#c0c0c0');
            root.style.setProperty('--accent', '#4b6cb7');
        }
    }

    // --- MULTIPLAYER SIMULATION ---
    function sendCoins() {
        const amount = parseInt(document.getElementById('send-amount').value);
        const name = document.getElementById('friend-name').value;

        if (!name || isNaN(amount) || amount <= 0) {
            notify("‚ö†Ô∏è –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ!");
            return;
        }

        if (player.coins >= amount) {
            player.coins -= amount;
            notify(`üì§ –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç –≥—Ä–∞–≤—Ü—é ${name}!`);
            updateUI();
        } else {
            notify("‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º–æ–Ω–µ—Ç!");
        }
    }

    function generateLeaderboard() {
        // Fake bots + Current Player
        let bots = [
            { name: "CyberWolf", coins: 5000, title: "–õ–µ–≥–µ–Ω–¥–∞" },
            { name: "PixelHunter", coins: 3400, title: "–ú–∞–π—Å—Ç–µ—Ä" },
            { name: "CodeNinja", coins: 1200, title: "–ù–æ–≤–∞—á–æ–∫" }
        ];
        
        // Add current player to list for sorting
        let allPlayers = [...bots, { name: "–í–ò (You)", coins: player.coins, title: player.title }];
        
        // Sort by coins
        allPlayers.sort((a, b) => b.coins - a.coins);

        const tbody = document.getElementById('leaderboard-body');
        tbody.innerHTML = '';
        
        allPlayers.forEach((p, index) => {
            let row = `<tr>
                <td>#${index + 1}</td>
                <td>${p.name}</td>
                <td>${p.coins}</td>
                <td>${p.title}</td>
            </tr>`;
            tbody.innerHTML += row;
        });
    }

    // Init
    updateUI();
    generateLeaderboard();

</script>

</body>
</html>
